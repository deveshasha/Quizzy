{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  <title>Quizzy</title>
  {% load staticfiles %}

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="{% static 'css/materialize.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="{% static 'css/style.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>

    <script type="text/javascript">
        var tim;
        var min = 3;
        var sec = 0;
        var f = new Date();
        var hours = f.getHours();
        var minutes = f.getMinutes();
        var pm = 0;
        if(hours >= 12)
            pm = 1;
        hours = hours % 12;
        hours = hours ? hours : 12;
        if(hours < 10){
            hours = "0" + hours;
        }
        if (minutes < 10) {
            minutes = "0" + minutes;
        };
        if(min < 10) {
            min = "0" + min;
        };
        function f1() {
            f2();
            if(pm)
                document.getElementById("starttime").innerHTML = "You started your Exam at " + hours + ":" + minutes + " PM";
            else
                document.getElementById("starttime").innerHTML = "You started your Exam at " + hours + ":" + minutes + " AM";
        }
        function f2() {
            if (parseInt(sec) > 0) {
                sec = parseInt(sec) - 1;
                if(sec < 10)
                {
                    sec= "0" + sec;
                }
                
                document.getElementById("showtime").innerHTML = "<h4>Time left :</h4>" + min + ":" + sec;
                tim = setTimeout("f2()", 1000);
            }
            else {
                if (parseInt(sec) == 0) 
                {

                    min = parseInt(min) - 1;
                    if(min == 0)
                        min = "0" + min;
                    if (parseInt(min) == -1) 
                    {
                        clearTimeout(tim);
                        alert('Oops,your time is up!!');
                        document.getElementById("form").submit();
                        
                    }
                    else 
                    {
                        sec = 59;
                        document.getElementById("showtime").innerHTML = "<h4>Time left :</h4>" + min + ":" + sec;

                        tim = setTimeout("f2()", 1000);
                    }
                }
               
            }
        }
        
        </script>

</head>

<body onload="f1()">
  <nav class="white" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="/" class="brand-logo">Quizzy</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="/">Home</a></li>
        <li><a href="/test/">Languages</a></li>
          <!-- <ul id='dropdown1' class='dropdown-content'>
            <li><a href="#!">C</a></li>
            <li><a href="#!">Java</a></li>
            <li class="divider"></li>
            <li><a href="#!">Php</a></li>
          </ul> -->
          <li><a href="/forums">Forum</a></li>
        <li><a href="/contact">Contact Us</a></li>
        {% if user.is_authenticated %}
        <li><a class="dropdown-button" data-beloworigin="true" data-activates="dropdown1">Welcome {{user.username}} ▼</a></li>
          <ul id='dropdown1' class='dropdown-content'>
            <li><a href="/performance">Your Performance</a></li>
            <li><a href="/logout">Logout</a></li>
          </ul>
        {% else %}
        <li><a href="/login">Register/Login</a></li>
        {% endif %}
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="/">Home</a></li>
        <li><a href="/test/">Languages</a></li>
        <li><a href="/forums">Forum</a></li>
        <li><a href="/contact">Contact Us</a></li>
        {% if user.is_authenticated %}
        <li><a class="dropdown-button" data-beloworigin="true" data-activates="dropdown2">Welcome {{user.username}} ▼</a></li>
          <ul id='dropdown2' class='dropdown-content'>
            <li><a href="/performance">Your Performance</a></li>
            <li><a href="/logout">Logout</a></li>
          </ul>
        {% else %}
        <li><a href="/login">Register/Login</a></li>
        {% endif %}
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
    <div class="card-panel"><span class="blue-text text-darken-2" style="margin-left: 14%" id="starttime"><h4></h4></span>
    </div>
    <div class="row">
      <div class="col s6 offset-s9"><span class="flow-text" id="showtime" style="position:fixed;"></span></div>
  </div>
		
	<form style="margin-left: 10%" action="result/" method="POST" id="form">
    {% csrf_token %}
    <ul>
    {% for question in latest_question_list %}
    
        <li>{{forloop.counter}}.<b><em>{{ question.q_text }}</em></b></li>
        <input class="with-gap" type="radio" id="{{forloop.counter}}1" name="{{forloop.counter}}" value="{{forloop.counter}}-{{question.option1}}" />
        <label for="{{forloop.counter}}1">{{ question.option1}}</label><br>

        <input class="with-gap" type="radio" id="{{forloop.counter}}2" name="{{forloop.counter}}" value="{{forloop.counter}}-{{question.option2}}" />
        <label for="{{forloop.counter}}2">{{ question.option2}}</label><br>

        <input class="with-gap" type="radio" id="{{forloop.counter}}3" name="{{forloop.counter}}" value="{{forloop.counter}}-{{question.option3}}" />
        <label for="{{forloop.counter}}3">{{ question.option3}}</label><br>

        <input class="with-gap" type="radio" id="{{forloop.counter}}4" name="{{forloop.counter}}" value="{{forloop.counter}}-{{question.option4}}" />
        <label for="{{forloop.counter}}4">{{ question.option4}}</label><br><br><br>
        <div class="divider"></div>
    {% endfor %}
    
    </ul>
    <button data-target="modal1" class="btn modal-trigger" type="submit">Submit</button>
    <div id="modal1" class="modal">
    <div class="modal-content">
      <h5>Are you sure you want to submit the test?</h5>
    </div>
    <div class="modal-footer">
      <a class=" modal-action modal-close waves-effect waves-green btn-flat">No</a>
      <input type="submit" class="modal-action modal-close waves-effect waves-green btn-flat" value="Yes"></input>
    </div>
  </div>
    </form>
    <footer class="page-footer white">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="black-text">Company Bio</h5>
          <p class="black-text text-lighten-4">We are a team of college students working on this project like it's our full time job. Any amount would help support and continue development on this project and is greatly appreciated.</p>


        </div>
        <div class="col l3 s12">
          <h5 class="black-text">Test your Skills</h5>
          <ul>
            <li><a class="black-text" href="#!">C</a></li>
            <li><a class="black-text" href="#!">Java</a></li>
            <li><a class="black-text" href="#!">Php</a></li>
            <li><a class="black-text" href="#!">More Languages coming soon..</a></li>
          </ul>
        </div>
        <div class="col l3 s12">
          <h5 class="black-text">Connect</h5>
          <ul>
            <li><a class="black-text" href="#!">Home</a></li>
            <li><a class="black-text" href="#!">About Us</a></li>
            <li><a class="black-text" href="#!">Contact Us</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </footer>
  
  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="{% static 'js/materialize.js' %}"></script>
  <script src="{% static 'js/init.js' %}"></script>
  <script>
  
$(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
    $('.modal-trigger').leanModal();
  });
  
</script>
</body>
</html>